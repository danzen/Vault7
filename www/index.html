<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta http-equiv="Content-Security-Policy" content="default-src *; style-src * 'unsafe-inline'; script-src * 'unsafe-inline'; media-src *">
<meta name="viewport" content="user-scalable=no, minimal-ui, shrink-to-fit=no" />
<title>Vault 7 - Open Safe Puzzle - Dan Zen</title>

<script src="libraries/createjs-2015.11.26.min.js"></script>
<script src="phonegap.js"></script>
<!-- <script src="libraries/CordovaAudioPlugin.js"></script> -->
<!-- or can go to zimjs.com and createjs.com for individual modules -->

<style>
	body {margin:0px; padding:0px; background-color:#000;}
	#myCanvas {position:absolute; background-color:#fff;}
</style>

<script>

window.addEventListener("load", function() {

	var stage = new createjs.Stage("myCanvas");
	stageW = stage.canvas.width;
	stageH = stage.canvas.height;
	stage.setBounds(0,0,stageW,stageH);

	// createjs.Sound.registerPlugins([createjs.CordovaAudioPlugin]);


	function getPhoneGapPath() {
	   var path = window.location.pathname;
	   path = path.substr( path, path.length - 10 );
	   return path;
	   // android add 'file://'
	};


	var manifest = [{src:"back.jpg", id:"test"}, {src:"b01.mp3", id:"b"}];
	var preload = new createjs.LoadQueue(false, getPhoneGapPath() + "assets/");
	preload.installPlugin(createjs.Sound);
	preload.on("complete", function() {
		var underlay = new createjs.Bitmap(preload.getResult("test"));
		stage.addChild(underlay);
		underlay.x = 500;
		stage.update();
	});
	preload.on("error", function(e) {
		var label = new createjs.Text(e.title);
		label.x = stageW/2;
		label.y = stageH/2;
		stage.addChild(label);
		stage.update();
	});
	preload.loadManifest(manifest);

});

</script>
</head>

<body>
<canvas width=320 height=640 id=myCanvas></canvas>
</body>
</html>
